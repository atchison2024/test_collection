<!DOCTYPE html>
<html>
<head>
  <title>Secure Form</title>
  <script>
    function checkPassword() {
      const password = document.getElementById("password").value;
      if (password === "123456") {
        document.getElementById("form-container").style.display = "block";
        document.getElementById("password-section").style.display = "none";
      } else {
        alert("Incorrect password.");
      }
    }

    function submitForm() {
      const name = document.getElementById("name").value;
      const age = document.getElementById("age").value;
      const hobby = document.getElementById("hobby").value;

      const data = {
        name,
        age,
        hobby,
        timestamp: new Date().toISOString()
      };

      fetch("http://localhost:3000/api/save", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      })
      .then(res => {
        if (res.ok) {
          alert("Submitted successfully!");
        } else {
          alert("Error submitting form.");
        }
      })
      .catch(err => alert("Network error: " + err));
    }
  </script>
</head>
<body>
  <div id="password-section">
    <input type="password" id="password" placeholder="Enter password" />
    <button onclick="checkPassword()">Enter</button>
  </div>

  <div id="form-container" style="display:none;">
    <h2>User Information</h2>
    <input type="text" id="name" placeholder="Name"><br><br>
    <input type="number" id="age" placeholder="Age"><br><br>
    <input type="text" id="hobby" placeholder="Hobby"><br><br>
    <button onclick="submitForm()">Submit</button>
  </div>
</body>
</html>
